<div id="plot-component">
  <%= if @user_options in [:new, :edit] do %>
    <.form
      for={@form}
      id="plot-form"
      as={:plot}
      phx-target={@myself}
      phx-change="validate"
      phx-submit={@user_options == :edit && "update" || "save"}
    >
      <.input
        field={@form[:title]}
        type="text"
        label="Title"
        placeholder="Enter plot title"
        required
      />
      <.input
        field={@form[:description]}
        type="textarea"
        label="Description"
        placeholder="Enter plot description"
        required
      />
      <.input
        field={@form[:user_id]}
        type="select"
        label="User"
        options={@user_select_options}
        required
      />
      <.button><%= @user_options == :edit && "Update Plot" || "Save Plot" %></.button>
    </.form>
  <% end %>

  <%= if @user_options == :show do %>
    <div class="plot-details">
      <h2><%= @plot.title %></h2>
      <p><strong>Description:</strong> <%= @plot.description %></p>
      <p><strong>User:</strong> <%= @plot.user.name %></p>
    </div>
  <% end %>

  <%= if @user_options == :delete do %>
    <div class="confirm-delete">
      <p>Are you sure you want to delete "<%= @plot.title %>"?</p>
      <.button phx-click="delete" phx-target={@myself}>Delete Plot</.button>
    </div>
  <% end %>
</div>
